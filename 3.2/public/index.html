<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Quick Recipes – SIT725 3.2P</title>
  <!-- Materialize CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet" />
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    .hero {
      padding: 40px 0;
    }
    .recipe-card-image {
      height: 200px;
      object-fit: cover;
    }
  </style>
</head>
<body class="grey lighten-4">

  <!-- NAVBAR -->
  <nav class="teal">
    <div class="nav-wrapper container">
      <a href="#" class="brand-logo">
        <i class="material-icons">restaurant_menu</i> Quick Recipes
      </a>
      <ul class="right hide-on-med-and-down">
        <li><a href="#recipes">Recipes</a></li>
        <li><a href="#about">About</a></li>
      </ul>
    </div>
  </nav>

  <!-- HERO / INTRO -->
  <div class="hero teal lighten-5">
    <div class="container">
      <h4 class="teal-text text-darken-3">SIT725 – Task 3.2P: Getting Graphical</h4>
      <p>
        This demo shows a simple Express backend with a <code>/api/recipes</code> GET endpoint and a
        Materialize front-end that loads recipe cards dynamically using <code>fetch()</code>.
      </p>
      <a class="btn teal" href="#recipes">
        <i class="material-icons left">play_arrow</i>View Recipes
      </a>
    </div>
  </div>

  <!-- RECIPES GRID -->
  <div class="container" id="recipes">
    <h5 class="teal-text text-darken-3">Today’s Quick Recipes</h5>
    <div class="row" id="recipe-row">
      <!-- Cards will be injected here by JavaScript -->
    </div>
  </div>

  <!-- ABOUT SECTION -->
  <div class="section" id="about">
    <div class="container">
      <h5>About this project</h5>
      <p>
        This small web app was built for SIT725 Task 3.2P. It follows the practical structure:
        an Express server, a simple REST API, and a Materialize-based UI that consumes the API on
        the client side. The original “kitten/cards” example has been replaced with a new domain:
        fast and easy recipes for busy students.
      </p>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="page-footer teal">
    <div class="footer-copyrigh center">
      <div class="container">
        &copy; 2025 Quick Recipes – Built for SIT725
      </div>
    </div>
  </footer>

  <!-- Materialize JS + Fetch Logic -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script>
    // Fetch recipes from backend and render Materialize cards
    async function loadRecipes() {
      try {
        const res = await fetch('/api/recipes');
        const data = await res.json();
        const row = document.getElementById('recipe-row');
        row.innerHTML = '';

        data.forEach(recipe => {
          const col = document.createElement('div');
          col.className = 'col s12 m6 l4';

          col.innerHTML = `
            <div class="card hoverable">
              <div class="card-image">
                <img class="recipe-card-image" src="${recipe.image}" alt="${recipe.title}">
                <span class="card-title">${recipe.title}</span>
              </div>
              <div class="card-content">
                <p>${recipe.description}</p>
                <p class="grey-text text-darken-1">
                  <i class="material-icons tiny">schedule</i> ${recipe.time}
                  &nbsp;|&nbsp;
                  <i class="material-icons tiny">whatshot</i> ${recipe.difficulty}
                </p>
              </div>
              <div class="card-action">
                <a href="#!" class="teal-text text-darken-2">
                  <i class="material-icons tiny">favorite_border</i> Save for later
                </a>
              </div>
            </div>
          `;
          row.appendChild(col);
        });
      } catch (err) {
        console.error('Failed to load recipes', err);
        document.getElementById('recipe-row').innerHTML =
          '<p class="red-text">Could not load recipes. Check if the server is running.</p>';
      }
    }

    document.addEventListener('DOMContentLoaded', loadRecipes);
  </script>
</body>
</html>
